# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2018"
name = "nydus-service"
version = "0.3.0"
authors = ["The Nydus Developers"]
description = "Nydus Image Service Manager"
homepage = "https://nydus.dev/"
readme = "README.md"
license = "Apache-2.0"
repository = "https://github.com/dragonflyoss/image-service"
resolver = "2"

[dependencies.bytes]
version = "1"
optional = true

[dependencies.dbs-allocator]
version = "0.1.1"
optional = true

[dependencies.fuse-backend-rs]
version = "^0.10.3"

[dependencies.libc]
version = "0.2"

[dependencies.log]
version = "0.4.8"

[dependencies.mio]
version = "0.8"
features = [
    "os-poll",
    "os-ext",
]

[dependencies.nix]
version = "0.24.0"

[dependencies.nydus-api]
version = "0.3.0"

[dependencies.nydus-rafs]
version = "0.3.1"

[dependencies.nydus-storage]
version = "0.6.3"

[dependencies.nydus-utils]
version = "0.4.2"

[dependencies.rust-fsm]
version = "0.6.0"

[dependencies.serde]
version = "1.0.110"
features = [
    "serde_derive",
    "rc",
]

[dependencies.serde_json]
version = "1.0.51"

[dependencies.thiserror]
version = "1.0"

[dependencies.time]
version = "0.3.14"
features = ["serde-human-readable"]

[dependencies.tokio]
version = "1.24"
features = ["macros"]

[dependencies.vhost]
version = "0.5.0"
features = ["vhost-user-slave"]
optional = true

[dependencies.vhost-user-backend]
version = "0.7.0"
optional = true

[dependencies.virtio-bindings]
version = "0.1"
features = ["virtio-v5_0_0"]
optional = true

[dependencies.virtio-queue]
version = "0.6.0"
optional = true

[dependencies.vm-memory]
version = "0.9.0"
features = ["backend-mmap"]
optional = true

[dev-dependencies.vmm-sys-util]
version = "0.10.0"

[features]
block-device = [
    "dbs-allocator",
    "tokio/fs",
]
block-nbd = [
    "block-device",
    "bytes",
]
coco = [
    "fuse-backend-rs/fusedev",
    "nydus-storage/backend-registry",
]
default = ["fuse-backend-rs/fusedev"]
virtiofs = [
    "fuse-backend-rs/vhost-user-fs",
    "vm-memory",
    "vhost",
    "vhost-user-backend",
    "virtio-queue",
    "virtio-bindings",
]

[target."cfg(target_os = \"linux\")".dependencies.tokio-uring]
version = "0.4"

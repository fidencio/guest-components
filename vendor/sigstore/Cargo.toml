# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2021"
name = "sigstore"
version = "0.9.0"
authors = ["sigstore-rs developers"]
description = "An experimental crate to interact with sigstore"
readme = "README.md"
license = "Apache-2.0"
repository = "https://github.com/sigstore/sigstore-rs"

[package.metadata.docs.rs]
all-features = true

[[example]]
name = "verify"
path = "examples/cosign/verify/main.rs"

[[example]]
name = "verify-blob"
path = "examples/cosign/verify-blob/main.rs"

[[example]]
name = "verify-bundle"
path = "examples/cosign/verify-bundle/main.rs"

[[example]]
name = "sign"
path = "examples/cosign/sign/main.rs"

[[example]]
name = "openidconnect"
path = "examples/openidflow/openidconnect/main.rs"

[[example]]
name = "key_pair_gen_sign_verify"
path = "examples/key_interface/key_pair_gen_sign_verify/main.rs"

[[example]]
name = "key_pair_gen_and_export"
path = "examples/key_interface/key_pair_gen_and_export/main.rs"

[[example]]
name = "key_pair_import"
path = "examples/key_interface/key_pair_import/main.rs"

[[example]]
name = "create_log_entry"
path = "examples/rekor/create_log_entry/main.rs"

[[example]]
name = "get_log_entry_by_index"
path = "examples/rekor/get_log_entry_by_index/main.rs"

[[example]]
name = "get_log_entry_by_uuid"
path = "examples/rekor/get_log_entry_by_uuid/main.rs"

[[example]]
name = "get_log_info"
path = "examples/rekor/get_log_info/main.rs"

[[example]]
name = "get_log_proof"
path = "examples/rekor/get_log_proof/main.rs"

[[example]]
name = "get_public_key"
path = "examples/rekor/get_public_key/main.rs"

[[example]]
name = "search_index"
path = "examples/rekor/search_index/main.rs"

[[example]]
name = "search_log_query"
path = "examples/rekor/search_log_query/main.rs"

[[example]]
name = "fulcio_cert"
path = "examples/fulcio/cert/main.rs"

[dependencies]
async-trait = "0.1.52"
base64 = "0.22.0"
cfg-if = "1.0.0"
crypto_secretbox = "0.1.1"
futures = "0.3"
getrandom = "0.2.8"
hex = "0.4.3"
lazy_static = "1.4.0"
p256 = "0.13"
p384 = "0.13"
ring = "0.17.6"
rsa = "0.9.2"
scrypt = "0.11.0"
serde_json = "1.0.79"
serde_repr = "0.1.16"
thiserror = "1.0.30"
tracing = "0.1.31"
url = "2.2.2"
webbrowser = "1.0.1"
zeroize = "1.5.7"

[dependencies.cached]
version = "0.51.3"
features = ["async"]
optional = true

[dependencies.chrono]
version = "0.4.27"
features = [
    "now",
    "serde",
]
default-features = false

[dependencies.const-oid]
version = "0.9.6"
features = ["db"]

[dependencies.digest]
version = "0.10.3"
default-features = false

[dependencies.ecdsa]
version = "0.16.7"
features = [
    "pkcs8",
    "digest",
    "der",
    "signing",
]

[dependencies.ed25519]
version = "2.2.1"
features = ["alloc"]

[dependencies.ed25519-dalek]
version = "2.0.0-rc.2"
features = [
    "pkcs8",
    "rand_core",
]

[dependencies.elliptic-curve]
version = "0.13.5"
features = [
    "arithmetic",
    "pem",
]

[dependencies.futures-util]
version = "0.3.30"
optional = true

[dependencies.json-syntax]
version = "0.12.2"
features = [
    "canonicalize",
    "serde",
]

[dependencies.oci-distribution]
version = "0.11"
optional = true
default-features = false

[dependencies.olpc-cjson]
version = "0.1"
optional = true

[dependencies.openidconnect]
version = "3.0"
features = ["reqwest"]
optional = true
default-features = false

[dependencies.pem]
version = "3.0"
features = ["serde"]

[dependencies.pkcs1]
version = "0.7.5"
features = ["std"]

[dependencies.pkcs8]
version = "0.10.2"
features = [
    "pem",
    "alloc",
    "pkcs5",
    "encryption",
]

[dependencies.rand]
version = "0.8.5"
features = [
    "getrandom",
    "std",
]

[dependencies.regex]
version = "1.5.5"
optional = true

[dependencies.reqwest]
version = "0.12"
features = [
    "json",
    "multipart",
]
optional = true
default-features = false

[dependencies.rustls-webpki]
version = "0.102.1"
features = ["alloc"]

[dependencies.serde]
version = "1.0.136"
features = ["derive"]

[dependencies.serde_with]
version = "3.4.0"
features = [
    "base64",
    "json",
]
optional = true

[dependencies.sha2]
version = "0.10.6"
features = ["oid"]

[dependencies.signature]
version = "2.0"

[dependencies.sigstore_protobuf_specs]
version = "0.3.2"
optional = true

[dependencies.tls_codec]
version = "0.4.1"
features = ["derive"]

[dependencies.tokio]
version = "1.17.0"
features = ["rt"]

[dependencies.tokio-util]
version = "0.7.10"
features = ["io-util"]

[dependencies.tough]
version = "0.17.1"
features = ["http"]
optional = true

[dependencies.x509-cert]
version = "0.2.5"
features = [
    "builder",
    "pem",
    "std",
    "sct",
]

[dev-dependencies]
assert-json-diff = "2.0.2"
chrono = "0.4.31"
docker_credential = "1.1.0"
openssl = "0.10.38"
rstest = "0.21.0"
serial_test = "3.0.0"
tempfile = "3.3.0"
testcontainers = "0.17"

[dev-dependencies.anyhow]
version = "1.0"
features = ["backtrace"]

[dev-dependencies.clap]
version = "4.0.8"
features = ["derive"]

[dev-dependencies.tokio]
version = "1.17.0"
features = [
    "rt",
    "rt-multi-thread",
]

[dev-dependencies.tracing-subscriber]
version = "0.3.9"
features = ["env-filter"]

[features]
bundle = [
    "sign",
    "verify",
]
cached-client = ["cached"]
cert = []
cosign = ["olpc-cjson"]
cosign-native-tls = [
    "oci-distribution/native-tls",
    "cert",
    "cosign",
    "registry-native-tls",
]
cosign-rustls-tls = [
    "oci-distribution/rustls-tls",
    "cert",
    "cosign",
    "registry-rustls-tls",
]
default = [
    "full-native-tls",
    "cached-client",
    "sigstore-trust-root",
    "bundle",
]
fulcio = [
    "oauth",
    "serde_with",
]
fulcio-native-tls = [
    "oauth-native-tls",
    "reqwest/native-tls",
    "fulcio",
]
fulcio-rustls-tls = [
    "oauth-rustls-tls",
    "reqwest/rustls-tls",
    "fulcio",
]
full-native-tls = [
    "fulcio-native-tls",
    "rekor-native-tls",
    "cosign-native-tls",
    "mock-client-native-tls",
]
full-rustls-tls = [
    "fulcio-rustls-tls",
    "rekor-rustls-tls",
    "cosign-rustls-tls",
    "mock-client-rustls-tls",
]
mock-client = []
mock-client-native-tls = [
    "oci-distribution/native-tls",
    "mock-client",
]
mock-client-rustls-tls = [
    "oci-distribution/rustls-tls",
    "mock-client",
]
oauth = ["openidconnect"]
oauth-native-tls = [
    "openidconnect/native-tls",
    "oauth",
]
oauth-rustls-tls = [
    "openidconnect/rustls-tls",
    "oauth",
]
registry = ["olpc-cjson"]
registry-native-tls = [
    "oci-distribution/native-tls",
    "registry",
]
registry-rustls-tls = [
    "oci-distribution/rustls-tls",
    "registry",
]
rekor = ["reqwest"]
rekor-native-tls = [
    "reqwest/native-tls",
    "rekor",
]
rekor-rustls-tls = [
    "reqwest/rustls-tls",
    "rekor",
]
sign = [
    "sigstore_protobuf_specs",
    "fulcio",
    "rekor",
    "cert",
]
sigstore-trust-root = [
    "sigstore_protobuf_specs",
    "futures-util",
    "tough",
    "regex",
    "tokio/sync",
]
test-registry = []
verify = [
    "sigstore_protobuf_specs",
    "fulcio",
    "rekor",
    "cert",
]
wasm = [
    "getrandom/js",
    "ring/wasm32_unknown_unknown_js",
    "chrono/wasmbind",
]

# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2018"
name = "fuse-backend-rs"
version = "0.10.5"
authors = [
    "Liu Bo <bo.liu@linux.alibaba.com>",
    "Liu Jiang <gerry@linux.alibaba.com>",
    "Peng Tao <bergwolf@hyper.sh>",
]
build = "build.rs"
description = "A rust library for Fuse(filesystem in userspace) servers and virtio-fs devices"
homepage = "https://github.com/cloud-hypervisor/"
readme = "README.md"
keywords = [
    "fuse",
    "virtio",
    "virtio-fs",
    "vhost-user-fs",
]
categories = [
    "filesystem",
    "os::linux-apis",
]
license = "Apache-2.0 AND BSD-3-Clause"
repository = "https://github.com/cloud-hypervisor/fuse-backend-rs"

[package.metadata.docs.rs]
all-features = true
targets = [
    "x86_64-unknown-linux-gnu",
    "aarch64-unknown-linux-gnu",
    "aarch64-apple-darwin",
]

[dependencies.arc-swap]
version = "1.5"

[dependencies.async-trait]
version = "0.1.42"
optional = true

[dependencies.bitflags]
version = "1.1"

[dependencies.io-uring]
version = "0.5.8"
optional = true

[dependencies.lazy_static]
version = "1.4"

[dependencies.libc]
version = "0.2.68"

[dependencies.log]
version = "0.4.6"

[dependencies.mio]
version = "0.8"
features = [
    "os-poll",
    "os-ext",
]

[dependencies.nix]
version = "0.24"

[dependencies.tokio]
version = "1"
optional = true

[dependencies.tokio-uring]
version = "0.4.0"
optional = true

[dependencies.vhost]
version = "0.6"
features = ["vhost-user-slave"]
optional = true

[dependencies.virtio-queue]
version = "0.7"
optional = true

[dependencies.vm-memory]
version = "0.10"
features = ["backend-mmap"]

[dependencies.vmm-sys-util]
version = "0.11"
optional = true

[dev-dependencies.tokio-test]
version = "0.4.2"

[dev-dependencies.vm-memory]
version = "0.10"
features = [
    "backend-mmap",
    "backend-bitmap",
]

[dev-dependencies.vmm-sys-util]
version = "0.11"

[features]
async-io = [
    "async-trait",
    "tokio-uring",
    "tokio/fs",
    "tokio/net",
    "tokio/sync",
    "tokio/rt",
    "tokio/macros",
    "io-uring",
]
default = ["fusedev"]
fusedev = [
    "vmm-sys-util",
    "caps",
    "core-foundation-sys",
]
vhost-user-fs = [
    "virtiofs",
    "vhost",
    "caps",
]
virtiofs = [
    "virtio-queue",
    "caps",
    "vmm-sys-util",
]

[target."cfg(target_os = \"linux\")".dependencies.caps]
version = "0.5"
optional = true

[target."cfg(target_os = \"linux\")".dependencies.tokio-uring]
version = "0.4.0"
optional = true

[target."cfg(target_os = \"macos\")".dependencies.core-foundation-sys]
version = ">=0.8"
optional = true
